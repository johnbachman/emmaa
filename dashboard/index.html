<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EMMMAA dashboard</title>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

  <!-- AWS SDK -->
  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.283.1.min.js"></script>
  <script>
    // cognito arameters
    var userPoolID = 'us-east-1_5sb1590b6'; // User pool ID; User info lives here
    // var awsCognitoLogin = 'cognito-idp.us-east-1.amazonaws.com/' + userPoolID;
    var identitypoolid = 'us-east-1:3df28551-37da-4e74-a250-cf4c23ba837a'; // IdentityPool Id
    AWS.config.region = 'us-east-1' // Set region
    AWS.config.credentials = new AWS.CognitoIdentityCredentials({
        IdentityPoolId: 'us-east-1:3df28551-37da-4e74-a250-cf4c23ba837a',
    });

    // Cognito User Parameters
    var userAuthenticationData = {
        Username : 'kkaris',
        Password : 'S%ugha77Sfn29U^uTkBR36YgVa87!x98'
    };

  function responseResolve(err, data) {
    if (err) {
      console.log('Error occured while trying to initiate auth:')
      console.log(err, err.stack)
    } else {
      console.log('Auth data:')
      console.log(data)
      notifyUser("Successfully signed in!")
    }
  }


    // Testing signing in
    function signIn() {
      console.log('Sign in button')
      cogIdServiceProvider = new AWS.CognitoIdentityServiceProvider();
      cogIdServiceProvider.initiateAuth({
        AuthFlow: 'USER_PASSWORD_AUTH', // What type of authentication to use
        ClientId: '3ej6b95mbsu28e5nkcb6oa8fnp', // AppClientId for UserPool??
        
        AuthParameters: {
          'USERNAME': 'kkaris',
          'PASSWORD': 'S%ugha77Sfn29U^uTkBR36YgVa87!x98'
          /* '<StringType>': ... */
        }
      }, function(err, data) {
        responseResolve(err, data)
      });
    }

    // CHANGE TEXT
    function notifyUser(outputText) {
      let outputDiv = document.getElementById('sign-in-check');
      outputDiv.textContent = outputText;
    }
  </script>
</head>

<body>
  This is the EMMAA dashboard landing page
  <h5>Check if you're signed in</h5>
  <div class="container">
    <div id="sign-in-check">Not signed in</div>
  </div>

  <h5>Sign in here</h5>
  <div class="container">
    <div class="button">
      <button class="btn btn-default" id="signIn" onClick="signIn()">Sign in...</button>
    </div>
  </div>

  <h4>Sign up</h4>
  Sign up <a href="https://emmaa.auth.us-east-1.amazoncognito.com/login?response_type=code&client_id=3ej6b95mbsu28e5nkcb6oa8fnp&redirect_uri=https://indralab.github.io">here</a>
</body>
</html>
